zookeeper-servers:
  - host: zookeeper.zookeeper-system.svc.cluster.local
    port: 2281  # TLS-enabled port

labels:
  - name: ubuntu-24-04-pod
    min-ready: 0
  - name: debian-13-pod
    min-ready: 0
  - name: debian-opencode
    min-ready: 0
  - name: debian-claude-code
    min-ready: 0

providers:
  - name: kubernetes-pods
    driver: kubernetes
    max-servers: 8
    pools:
      - name: main
        labels:
          - name: ubuntu-24-04-pod
            type: pod
            python-path: /usr/bin/python3
            cpu: 2
            memory: 2048
            spec:
              containers:
                - name: ubuntu-24-04-pod
                  image: ghcr.io/seanmooney/ci-test-node-ubuntu-24.04:latest
                  imagePullPolicy: Always
                  env:
                    - name: SSH_AUTHORIZED_KEYS
                      valueFrom:
                        secretKeyRef:
                          name: zuul-executor-pubkey
                          key: pubkey
          - name: debian-13-pod
            type: pod
            python-path: /usr/bin/python3
            cpu: 2
            memory: 2048
            spec:
              containers:
                - name: debian-13-pod
                  image: ghcr.io/seanmooney/ci-test-node-debian-13:latest
                  imagePullPolicy: Always
                  env:
                    - name: SSH_AUTHORIZED_KEYS
                      valueFrom:
                        secretKeyRef:
                          name: zuul-executor-pubkey
                          key: pubkey
          - name: debian-opencode
            type: pod
            python-path: /usr/bin/python3
            cpu: 2
            memory: 2048
            spec:
              containers:
                - name: debian-opencode
                  image: ghcr.io/seanmooney/ci-node-opencode:latest
                  imagePullPolicy: Always
                  env:
                    - name: SSH_AUTHORIZED_KEYS
                      valueFrom:
                        secretKeyRef:
                          name: zuul-executor-pubkey
                          key: pubkey
          - name: debian-claude-code
            type: pod
            python-path: /usr/bin/python3
            cpu: 2
            memory: 2048
            spec:
              containers:
                - name: debian-claude-code
                  image: ghcr.io/seanmooney/ci-node-claude-code:latest
                  imagePullPolicy: Always
                  env:
                    - name: SSH_AUTHORIZED_KEYS
                      valueFrom:
                        secretKeyRef:
                          name: zuul-executor-pubkey
                          key: pubkey
